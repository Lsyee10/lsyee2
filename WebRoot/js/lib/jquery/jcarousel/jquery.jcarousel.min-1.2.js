$.fn.carousel=function(e,t,i){function v(e){n.stop(!0,!1).animate({left:-e*s},300),d.stop(!0,!1).eq(e).addClass("active").siblings().removeClass("active")}var r,s=$(this).width(),n=$(this).children("ul"),a=n.children("li"),l=a.length,c=0;a.css("width",s),n.css("width",s*l),$(this).height(s*e+parseInt(t));for(var f='<div class="control" style="bottom:'+i+'px">',o=1;l>=o;o++)f+="<span>"+o+"</span>";f+='</div><span class="pre"></span><span class="next"></span>',$(this).append(f);var d=$(this).find(".control span"),h=$(this).find(".pre,.next");d.eq(0).addClass("active"),d.mouseover(function(){c=$(this).index(),v(c)}),$(this).find(".pre").click(function(){c=d.filter(".active").index(),c--,-1==c&&(c=l-1),v(c)}),$(this).find(".next").click(function(){c=d.filter(".active").index(),c++,c==l&&(c=0),v(c)}),$(this).hover(function(){clearInterval(r),h.stop(!0,!1).fadeIn()},function(){h.stop(!0,!1).fadeOut(),r=setInterval(function(){v(c),c++,l==c&&(c=0)},3e3)}).trigger("mouseleave")};